<div class="painel-propriedades">
  <div class="painel-header">
    <h2>Minhas Propriedades</h2>
    <button class="btn btn-success btn-sm" (click)="abrirCadastro()" [disabled]="loading">
      <i class="icon-add"></i> Nova Propriedade
    </button>
  </div>

  <div *ngIf="erro" class="alert alert-danger alert-dismissible fade show" role="alert">
    {{ erro }}
    <button type="button" class="btn-close" (click)="erro = ''"></button>
  </div>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
  </div>

  <div *ngIf="!loading && propriedades.length > 0" class="propriedades-grid">
    <div *ngFor="let propriedade of propriedades" class="propriedade-card" (click)="selecionarPropriedade(propriedade)">
      <div class="card-header">
        <h3>{{ propriedade.nome }}</h3>
      </div>
      <div class="card-body">
        <p class="descricao" *ngIf="propriedade.descricao">{{ propriedade.descricao }}</p>
        <div class="talhoes-info">
          <strong>Talh√µes:</strong>
          <span class="badge bg-info">{{ propriedade.talhoes?.length || 0 }}</span>
        </div>
        <div class="talhoes-list" *ngIf="propriedade.talhoes && propriedade.talhoes.length > 0">
          <small *ngFor="let talhao of propriedade.talhoes" class="d-block">
            <i class="icon-field"></i> {{ talhao.nome }} ({{ talhao.cultura }}) - {{ talhao.areaHectares }}ha
          </small>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && propriedades.length === 0" class="empty-state">
    <p>Nenhuma propriedade cadastrada</p>
    <button class="btn btn-success" (click)="abrirCadastro()">Cadastrar Propriedade</button>
  </div>
</div>
